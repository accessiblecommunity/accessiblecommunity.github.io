---
import { type PageMetadata } from "@lib/types";
import { getOpenGraphImageData } from "@lib/og-image";
import { getCollection, type CollectionEntry } from "astro:content";

export async function getStaticPaths() {
  const entries = await getCollection("daf");
  const paths = entries.map(entry => ({
    params: { name: entry.id },
    props: {
      entry,
      metadata: {
        title: entry.data.title,
        description: entry.data.description,
        image: getOpenGraphImageData(
          Astro.site,
          "pages",
          "daf",
          entry.data.description,
        ),
      },
    },
  }));
  console.log(paths);
  return paths;
}

interface Props {
  entry: CollectionEntry<"daf">;
  metadata: PageMetadata;
}
const { entry, metadata } = Astro.props;

import DAFStripedLayout from "src/layouts/DAFStripedLayout.astro";
---

<DAFStripedLayout {entry} {metadata} />

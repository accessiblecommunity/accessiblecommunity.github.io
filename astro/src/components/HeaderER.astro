---
import { Icon } from "astro-icon/components";
import Branding from "@components/Branding.astro";
import SiteNav from "./NavSiteSecondary.astro";
---

<header class="sticky-top">
  <SiteNav />
  <div id="header-escape-navbar" class="navbar navbar-expand-lg align-items-top">
    <div id="brand-nav" class="container-fluid px-3">
      <button
        class="navbar-toggler px-1 me-2 d-print-none"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#escape-room-nav"
        aria-controls="escape-room-nav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <Icon name="bi:list" class="bi" />
      </button>
      <div class="d-none d-lg-block navbar-brand me-2">
        <Icon
          class="bi"
          name="escape-room-logo"
          height="2.5rem"
          role="img"
          aria-hidden="true"/>
      </div>
      <div class="d-flex flex-column flex-fill">
        <div class="lh-1">
          <a class="navbar-brand" href="/">
            <Branding>Accessible Escape Room</Branding>
          </a>
        </div>
        <span class="d-lg-none"><em>by</em> <Branding>Accessible Community</Branding></span>
      </div>
    </div>
    <nav id="escape-room-nav" class="collapse navbar-collapse px-3 d-print-none d-lg-flex w-100 justify-content-end" aria-label="Escape Room">
      <ul class="navbar-nav my-1 mx-4">
        <li class="nav-item dropdown">
          <a
            class="nav-link"
            data-bs-toggle="dropdown"
            href="#"
            aria-expanded="false">Build-Your-Own Kits
          </a>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link"
            data-bs-toggle="dropdown"
            href="#"
            aria-expanded="false">How it works</a
          >
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link"
            data-bs-toggle="dropdown"
            href="#"
            aria-expanded="false">Our Story</a
          >
        </li> 
        <li class="nav-item dropdown d-lg-none">
          <a
            class="nav-link"
            data-bs-toggle="dropdown"
            href="/"
            aria-expanded="false">Accessible Community Home</a
          >
        </li>     
      </ul>
    </nav>
  </div>
</header>
<slot />

<style lang="scss">
  /* first declaration that is commented out below is for debugging purposes. */
  // * {
  //    outline: 1px solid white;
  // }

  @import "../styles/dark-mode.scss";
  @import "../styles/responsive-sizing.scss";

  #header-navbar {
    min-width: 320px;
  }

  .services-menu .icon-link {
    gap: 0.25rem;
  }

  .logo-image {
    color: white
  }

  [data-icon="bi:list"] {
    width: 1.25rem;
    height: 1.25rem;
  }
  [data-icon="escape-room-logo"] {
    width: 3.25rem;
    height: 3.25rem;
  }

  #brand-nav {
    height: 3.5rem;
  }

  .nav-link {
    margin-inline: 0.222em;
    margin-top: 0.222em;
    margin-bottom: 0.222em;
  }

  .navbar-toggler {
    background-color: #dfe1ed;
    border-color: var(--bs-primary-text-emphasis);
    color: var(--bs-primary);
    padding-inline: 3px;
    font-size: 1.1rem;
  }

  @include media-breakpoint-down(md) {
    .navbar-brand {
      --bs-navbar-brand-font-size: 1.1rem;
      vertical-align: sub;
    }
  }

  @include media-breakpoint-down(sm) {
    .navbar-brand {
      --bs-navbar-brand-font-size: 1rem;
      vertical-align: sub;
    }
  }
  
  @include color-mode(dark) {
    .navbar {
      --bs-body-bg: var(--bs-primary);
    }

    .brand-logo {
      color: #ffffff;
    }

    .navbar-toggler {
      color: #ffffff !important;
      background-color: var(--bs-primary);
    }
  }
</style>

<style scoped>
  .gi {
    height: 1em;
    width: auto;
    margin-right: 0.2em;
  }
</style>

<script>
  import { Collapse, Dropdown } from "~bootstrap-es";

  Array.from(document.querySelectorAll(".dropdown")).forEach(
    (node) => new Dropdown(node),
  );
  Array.from(document.querySelectorAll(".collapse")).forEach(
    (node) => new Collapse(node, { toggle: false }),
  );
</script>

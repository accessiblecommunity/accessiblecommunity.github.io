---
import { getEntry } from "astro:content";
import TeamVignette from "./TeamVignette.astro";

interface Props {
  slug: string;
  text?: string;
  element?: string;
}

const { slug, text = undefined } = Astro.props;

const testimonial = await getEntry('testimonials', slug);
const { Content, } = await testimonial?.render();

const person = testimonial?.data.person;
const teamMemberSlug = testimonial?.data.teamMember?.slug;
console.log(person)

const element = "div";
const NameTag = element;
        /* { person.title && (<div set:html={person.title} />)} */
---

<figure class="d-flex flex-column justify-content-center">
  <blockquote class:list={["blockquote", text && `text-${text}`]}>
    <Content />
  </blockquote>
  { teamMemberSlug ? (
    <figcaption class:list={["blockquote-footer fs-4", text && `text-${text}`, "text-end"]}>
      <TeamVignette
        member={teamMemberSlug}
        left={false}
        firstNameOnly={true}
        valign="center"
      />
    </figcaption>
    ) : (
      <figcaption class:list={["blockquote-footer fs-4 d-flex justify-content-end", text && `text-${text}`, "text-end"]}>
        <div class="text-start d-inline-block">
          { person?.title ? (
            <NameTag class="vignette-name" set:html={person?.name} />
            <div class="vignette-title" set:html={person?.title}>
            </div>
          ) : (
            <NameTag class="vignette-name" set:html={person?.name} />
          )}
        </div>
      </figcaption>
    )}
</figure>

<style>
  /* first declaration that is commented out below is for debugging purposes. */
  /* * {
    outline: 1px solid black;
  } */
</style>
---
interface Props {
  text?: String;
  class?: String;
  "no-aria"?: Boolean;
}

let {
  "text": inputText = "",
  class: extraClasses = "",
  "no-aria": noAria = false,
} = Astro.props;

if (Astro.slots.has("default")) inputText = await Astro.slots.render("default");

const text = inputText
  .replace(/Accessib(le)/, '<span class="fw-lighter">Accessib$1</span>')
  .replace(
    // Sometimes the YAML parsing inserts a space between => "a 11 y"
    // TODO: Fix capitalization of second word for programs.
    /(glob|mutu|loc|t)a\s?11\s?y/i,
    noAria
    ? '<span class="text-lowercase">$1<span class="fw-lighter">a11y</span></span>'
    : '<span class="text-lowercase" aria-hidden="true">$1<span class="fw-lighter">a11y</span></span><span class="visually-hidden">$1ally</span>',
  )
  .replace(
    /(use)able/i,
    noAria ?
      '<span class="text-lowercase">$1<span class="fw-lighter">able</span></span>'
    : '<span class="text-lowercase" aria-hidden="true">$1<span class="fw-lighter">able</span></span><span class="visually-hidden">Usable</span>',
  )
  .replace(
    /(fix)able/i,
    noAria ?
      '<span class="text-lowercase">$1<span class="fw-lighter">able</span></span>'
    : '<span class="text-lowercase" aria-hidden="true">$1<span class="fw-lighter">able</span></span><span class="visually-hidden">$1able</span>',
  );

const cssClasses = inputText === text ? [extraClasses] : ["text-brand fw-bold", extraClasses];
---

{/* Style is up top to remove additional whitespace after the tag */}
<style>
  /* Safari renders this weirdly... force to be a standard line height */
  span.text-brand,
  span.text-brand span.fw.lighter {
    line-height: normal;
  }
</style>
<span class:list={cssClasses} set:html={text} />
